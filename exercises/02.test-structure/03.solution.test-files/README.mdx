# Test files

I start by creating a new `greet.test.js` file and moving only the `test(...)` blocks there.

<CodeFile file="greet.test.js" range="3-9" />

<callout-info>Which suffix to use: `.spec.js` or `.test.js`, or both?</callout-info>

If I try to run test test file now, it will exit on undefined `greet()` and `congratulation()` functions because they are neither defined nor imported from anywhere.

So I go and export those functions from the `greet.js` module:

<CodeFile file="greet.js" range="1-7" highlight="1,5" />

And import them in the test file:

<CodeFile file="greet.test.js" range="1-9" highlight="1" />

Next, I want to make the `test()` and `expect()` functions available _globally_. Every test will be using those, so there's no need to explicitly import them every time.

I create a `setup.js` file where I move the `test()` and `expect()` functions from `greet.js`.

<CodeFile file="setup.js" range="1-19" />

And now, to expose them as global functions, I will extend the `globalThis` object by adding new global properties `test` and `expect`. As their values, I will reference the existing `test()` and `greet()` functions.

<CodeFile file="setup.js" range="21-22" />

All that remains is to verify that the tests are running correctly.

```sh nonumber
node --loader ./setup.js greet.test.js
```

> I am using the `--loader` option in Node.js to load the `./setup.js` module _before_ running the `greet.test.js`. This way the `test()` and `expect()` functions are globally available in the test.

TODO: We should be using `--import` but it's [bugged](https://github.com/nodejs/node/issues/40110#issuecomment-1808755491) in all versions of Node.js right now (also couldn't make it work on Node.js 18 at all).
